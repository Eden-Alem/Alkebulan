<!DOCTYPE html>
<html>
@* <head>
    <title></title>
    <meta charset="utf-8" />
	<script type='text/javascript'>
    function GetMap() {
        var map = new Microsoft.Maps.Map('#myMap', {
            credentials: 'AgA1tm9sBo2wr87-dPQHDDioIE4TQ6b67VD0sbHZrm2B-uy5NVJuWoeiAyvFmr_a'
        });

        //Request the user's location
        navigator.geolocation.getCurrentPosition(function (position) {
            var loc = new Microsoft.Maps.Location(
                position.coords.latitude,
                position.coords.longitude);

            //Add a pushpin at the user's location.
            var pin = new Microsoft.Maps.Pushpin(loc);
            map.entities.push(pin);

            //Center the map on the user's location.
            map.setView({ center: loc, zoom: 15 });
        });
    }
    </script>
    <script type='text/javascript' src='http://www.bing.com/api/maps/mapcontrol?callback=GetMap' async defer></script>
</head>
<body>
    <div id="myMap" style="position:relative;width:600px;height:400px;"></div>
</body> *@

<body>
    
                
<div id="divMap" style="position:relative;width:400px;   height:400px;border:1px solid blue;"></div>

<script src="http://dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"  type="text/javascript">  </script>

            
<script>
    $(document).load(function   () {
        if (!Modernizr.geolocation) {
            alert("This browser doesn't support the Geolocation API.");
            return;
        }
        navigator.geolocation.getCurrentPosition(OnSuccess, OnError);
    });

    function   OnSuccess(position) {
        var curPos = new Microsoft.Maps.Location(position.coords.latitude,   position.coords.longitude);
        var calloutOptions = { title: "Location Information", description:   "This is your current location." };
        var callout = new Microsoft.Maps.Infobox(curPos, calloutOptions);
        var mapOptions = {
            credentials: '<%=   ConfigurationManager.AppSettings["AgA1tm9sBo2wr87-dPQHDDioIE4TQ6b67VD0sbHZrm2B-uy5NVJuWoeiAyvFmr_a"] %>',
            center: curPos,
            mapTypeId: Microsoft.Maps.MapTypeId.road,
            zoom: 8
        };
        var map = new Microsoft.Maps.Map($("#divMap").get(0), mapOptions);
        map.entities.push(callout);
    }

    function   OnError(err) {
        alert(err.message);
        var calloutOptions = { title: "Location Information", description:   "This is the default location." };
        var defaultPos = new Microsoft.Maps.Location(18.916667, 72.9);
        var callout = new Microsoft.Maps.Infobox(defaultPos, calloutOptions);
        map.entities.push(callout);
    }
</script>


</body>


</html>